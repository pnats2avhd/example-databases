syntaxVersion: 6 # version of this config file syntax

##
## GPU NVENC enabled example to run for both h264/5. 
##
##

# P2(S|L)(TR|VL|XM)[0-9]{2}
databaseId: P2SXM01

# type: (short|long)
type: short

qualityLevelList:
#     <quality-level-id>:
#         index        : <index>
#         videoCodec   : (h264|h265|vp9)
#         videoBitrate : <bitrate>, # in kBit/s, or threshold for online services
#         width        : <width>
#         height       : <height>
#         fps          : (original|24/25/30|50/60|<fraction>|<fps>)
#                      # original: don't change FPS, or download with highest framerate for online services
#                      # 24/25/30 or 50/60: adaptive to SRC framerate
#                      # <fraction>: must contain a "/"
#                      # <fps>: in Hz
    Q0:
        index        : 0
        videoCodec   : h264
        videoBitrate : 300
        width        : 384
        height       : 216
        fps          : original
    Q1:
        index        : 1
        videoCodec   : h265
        videoBitrate : 600
        width        : 384
        height       : 216
        fps          : original




# codingList:
#     <coding-id>:
#         type           : (video|audio)
#         encoder        : (libx264|libx265|libvpx-vp9) or (libfdk_aac|...)
#         # video only:
#         passes         : (1|2)
#         iFrameInterval : <i-frame-interval> # in seconds
#         bframes        : <number-of-bframes> # optional, only valid for H.264/H.265
#         scenecut       : <scenecut> # optional, "true" or "false" (default: false)
#         preset         : <preset> # optional, valid presets for x264, x265, default: "medium"
#         speed          : <speed> # optional, valid speed for vp9, between 0 and 4, lower is slower, default: 2
#         quality        : <quality> # optional, valid quality for vp9, "good" or "best", default: "good" (optional for bitmovin encoding)
#         minrateFactor  : <minrate-factor> # optional, e.g. 1 to say that minrate = bitrate (as specified in quality level)(optional for bitmovin encoding)
#         maxrateFactor  : <maxrate-factor> # optional, e.g. 1 to say that maxrate = bitrate (as specified in quality level)(optional for bitmovin encoding)
#         bufsizeFactor  : <bufsize-factor> # optional, e.g. 3 to say that bufsize = 3 * bitrate (as specified in quality level)(optional for bitmovin encoding)
#         protocol       : <protocol> # mandatory for video streaming services "dash" or "hls"
#         profile        : <profile> # optional for bitmoving encoding, valid presets: "high" or "main", default: "main" (only for h264)
#         max_gop        : <maximum nuber of group-of-pictures> # optional for bitmovin encoding (for h264/h265)
#         min_gop        : <minimum nuber of group-of-pictures> # optional for bitmovin encoding (for h264/h265)
#         
#         ...
#     ...:
codingList:
    # specifies encoding options common to all quality levels of one HRC
    # other encoder defaults will be set in the scripts, not in the test config
    VC0 :
        type           : video
        iFrameInterval : 1200
        scenecut       : false
        passes         : 1
        encoder        : h264_nvenc
        preset         : p1
        nvenc_options  : "-rc cbr -tune 3 -zerolatency 1"
        minrateFactor  : 0.9
        maxrateFactor  : 1
        bufsizeFactor  : 1
        pixFmt         : yuv420p
    VC1 : 
        type           : video
        iFrameInterval : 1200
        scenecut       : false
        passes         : 1
        encoder        : hevc_nvenc
        preset         : p1
        nvenc_options  : "-rc cbr -tune 3 -zerolatency 1 -tag:v hvc1"
        minrateFactor  : 0.9
        maxrateFactor  : 1
        bufsizeFactor  : 1
        pixFmt         : yuv420p

# srcList:
#     <src-id>: name.avi
#     <src-id>:
#         srcFile : name2.avi
#         youtubeUrl: https://www.youtube.com/watch?v=ySTQk6updjQ
#     ...
srcList:
    # maps SRC IDs to filenames present in the srcVid folder
    # if there is a srcFile attribute, there must be a youtubeUrl attribute
    # as well, which will be looked up for HRC processing
    # <src-id>:     SRC[0-9]{3}

    SRC000: 10s-video.avi


pvsList:
    # implicitly maps SRCs and HRCs to PVSes
    # <database-id>_<src-id>_<hrc-id>
    - P2SXM01_SRC000_HRC000
    - P2SXM01_SRC000_HRC001
    
    
 

# hrcList:
#     <hrc-id>:
#         videoCodingId: <coding-id> # explains which kind of encoding will be used for HRC
#         audioCodingId: <coding-id> # optional, for long tests
#         segmentDuration: <segment-duration> # optional, overrides test default
#         eventList:
#             - [<quality-level-id>, <duration in seconds>|src_duration]
#             - [stall, <duration in seconds>]
#             - ...
#     ...:
#         eventList: ...


hrcList:
    # Clean
    HRC000:
        videoCodingId: VC0
        eventList:
            - [Q0, src_duration]
    HRC001:
        videoCodingId: VC1
        eventList:
            - [Q1, src_duration]



# postProcessingList:
#     - type: (pc|mobile|tablet)
#       displayHeight: <display height>
#       displayWidth: <display width>
#     - ...
postProcessingList:
    # list of contexts for which this test should generate PVSes
    - type: pc-home
      codingHeight: 216
      codingWidth: 384
      displayHeight: 216
      displayWidth: 384
    # - type: mobile
    #   codingHeight: 144
    #   codingWidth: 256
    #   displayHeight: 160
    #   displayWidth: 256
